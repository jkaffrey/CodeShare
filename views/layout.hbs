<!DOCTYPE html>
<html>
<head>
  <title>CodeShare</title>
  <link href="/stylesheets/bootstrap.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="/stylesheets/style.css" /> -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <link rel="stylesheet" href="/stylesheets/prism.css">
  <link rel="stylesheet" href="/stylesheets/ctexteditor.css">
  <link rel="stylesheet" href="/stylesheets/loginStyle.css">
  <link rel="stylesheet" href="/stylesheets/nabbar.css">
  <link rel="stylesheet" href="/stylesheets/tablestyle.css">
  <link rel="stylesheet" href="/stylesheets/personalProfile.css">
  <link rel="stylesheet" href="/stylesheets/contextmenu.css">
  <link rel="stylesheet" href="/stylesheets/index.css">
  <link rel="stylesheet" href="/stylesheets/themes/default/style.css">

  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  <script src="/javascripts/jstree.min.js"></script>
  <script src="/javascripts/moment.js"></script>
  <script src="https://repl.it/lib/api.js" type="text/javascript" charset="utf-8"></script>


</head>
<body>
  <!-- Begin Nav Bar -->
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">CodeShare</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            {{#if session.userInfo}}
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-user" aria-hidden="true"></i>
              <strong>{{session.userInfo.firstname}}&nbsp;{{session.userInfo.lastname}}</strong>
              <i class="fa fa-chevron-down" aria-hidden="true"></i>
            </a>
            {{else}}
            <span class="navbar-nav additionalProps"><a href="" data-toggle="modal" data-target="#registerModal">Register</a> | <a href="" data-toggle="modal" data-target="#loginModal">Login</a></span>
            {{/if}}
            <ul class="dropdown-menu">
              <li>
                <div class="navbar-login">
                  <div class="row">
                    <div class="col-lg-4">
                      <p class="text-center">
                        {{#if session.userInfo.profilePicture}}
                        <img id="navbar_profile" src="{{session.userInfo.profilePicture}}" />
                        {{else}}
                        <img id="navbar_profile" src="/images/default_profile.png" />
                        {{/if}}
                      </p>
                    </div>
                    <div class="col-lg-8">
                      <p class="text-left"><strong>{{session.userInfo.firstname}}&nbsp;{{session.userInfo.lastname}}</strong></p>
                      <p class="text-left small">{{session.userInfo.email}}</p>
                      <p class="text-left">
                        <a href="/profile" class="btn btn-primary btn-block btn-sm">Profile</a>
                      </p>
                    </div>
                  </div>
                </div>
              </li>
              <li class="divider"></li>
              <li>
                <div class="navbar-login navbar-login-session">
                  <div class="row">
                    <div class="col-lg-12">
                      <p>
                        <form action="/auth/logout" method="post">
                          <input type="submit" class="btn btn-danger btn-block" value="Logout" />
                        </form>
                      </p>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End Nav Bar -->
  <div class="errors center">
    {{#if session.userInfo}}
    {{#if session.userInfo.isVerified}}
    {{else}}
    <span class="alert alert-danger">Your account is not verified, you will have limited abilites until you verify your account.</span>
    {{/if}}
    {{/if}}
  </div>
  {{{body}}}
</body>
<!-- Register Modal -->
<div id="registerModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Register</h4>
      </div>
      <div class="modal-body">
        <div class="row main">
          <div class="main-login main-center">
            <form class="form-horizontal" method="post" enctype="multipart/form-data" action="/auth/signup">

              <div class="form-group">
                <label for="email" class="cols-sm-2 control-label">Your Email</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-envelope fa" aria-hidden="true"></i></span>
                    <input type="text" class="form-control" name="email" id="email" placeholder="Enter your Email" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-z]{2,3}$" required=""/>
                  </div>
                  <small id="errorEmail" hidden="">Please enter a valid e-mail address.</small>
                  <small id="errorEmailExists" hidden="">A user with this e-mail already exists. Have you <a href="">forgot your password?</a></small>
                </div>
              </div>

              <div class="form-group">
                <label for="name" class="cols-sm-2 control-label">Your Name</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
                    <input type="text" class="form-control" name="name" id="name"  placeholder="Enter your Name" pattern="^[A-Z][-'a-zA-Z]{1,}+,?\s[A-Z][-'a-zA-Z]{2,}$" required=""/>
                  </div>
                  <small id="errorName" hidden="">Please input your first and last name.</small>
                </div>
              </div>

              <div class="form-group">
                <label for="name" class="cols-sm-2 control-label">Profile Picture</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <!-- <span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span> -->
                    <input type="file" name="userPhoto" />
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="password" class="cols-sm-2 control-label">Password</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-lock fa-lg" aria-hidden="true"></i></span>
                    <input type="password" class="form-control" name="password" id="password"  placeholder="Enter your Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required=""/>
                  </div>
                  <small id="errorPassword" hidden="">Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters.</small>
                </div>
              </div>

              <div class="form-group">
                <label for="confirm" class="cols-sm-2 control-label">Confirm Password</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-lock fa-lg" aria-hidden="true"></i></span>
                    <input type="password" class="form-control" name="confirm" id="confirm"  placeholder="Confirm your Password" required=""/>
                  </div>
                  <small id="errorConfirm" hidden="">Your passwords do not match.</small>
                </div>
              </div>

              <div class="form-group">
                <label for="name" class="cols-sm-2 control-label">Security Question</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-question-circle fa-lg" aria-hidden="true"></i></span>
                    <select class="form-control" id="securityQuestion" name="securityQuestions" required="">
                      <option disabled selected value></option>
                      <option>What was your first phone number?</option>
                      <option>What is your mother's maiden name?</option>
                      <option>What was the name of your first boyfriend/girlfriend?</option>
                      <option>What is your favorite movie?</option>
                      <option>What is your favorite TV show?</option>
                      <option>What is your favorite book?</option>
                      <option>What is your favorite color?</option>
                      <option>What is your father's middle name?</option>
                      <option>What was your high school mascot?</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="confirm" class="cols-sm-2 control-label">Answer</label>
                <div class="cols-sm-10">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-circle-o-notch fa-lg" aria-hidden="true"></i></span>
                    <input type="password" class="form-control" name="securityAnswer" id="securityAnswer"  placeholder="Answer your security question" required=""/>
                  </div>
                </div>
              </div>

              <input type="submit" class="btn btn-primary btn-lg btn-block login-button" value="Register">

              <div class="login-register">
                <a href="/">Login</a>
              </div>
            </form>
          </div>
        </div>

        <script src="/javascripts/validations.js"></script>
      </div>
    </div>

  </div>
</div>

<!-- Login Modal -->
<div id="loginModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Login</h4>
      </div>
      <div class="modal-body">
        <div class="main-login main-center">
          <form class="form-horizontal" method="post" action="./auth/login">

            <div class="form-group">
              <label for="email" class="cols-sm-2 control-label">Email</label>
              <div class="cols-sm-10">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-envelope fa" aria-hidden="true"></i></span>
                  <input type="text" class="form-control" name="email" id="email"  placeholder="Enter your Email"/>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="password" class="cols-sm-2 control-label">Password</label>
              <div class="cols-sm-10">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-lock fa-lg" aria-hidden="true"></i></span>
                  <input type="password" class="form-control" name="password" id="password"  placeholder="Enter your Password"/>
                </div>
              </div>
            </div>

            <div class="form-group ">
              <input type="submit" class="btn btn-primary btn-lg btn-block login-button" value="Login">
            </div>
            <div class="login-register">
              <a href="/register">Register</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
</html>
